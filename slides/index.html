<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)

           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Taller Crafty</title>

    <meta charset='utf-8'>
    <script src='js/slides.js'></script>
  </head>

  <style>
    /* Your individual styles here, or just use inline styles if that’s
       what you want. */


  </style>

  <body style='display: none'>

    <section class='slides layout-regular template-default'>

      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->

      <!--<article class='biglogo'>
      </article>-->
      <!-- #1 -->
      <article>
        <h1>
           Taller de videojuegos con HTML5 y javascript
        </h1>
        <br />
        <p>
          <a href="http://www.javaguirre.net/">Javier Aguirre</a>
          <br/>
          <a href="http://www.it.uc3m.es/igrojas/">Israel Gutiérrez</a>
          <br/>
          13 de marzo de 2012
          <br/>
        </p>
        <div class="source">
            <a href="http://cursos.gul.es/">Jornadas técnicas GUL - UC3M</a>
        </div>
      </article>

      <article>
        <h4>Historia - Teoría</h4>
        <h5>Por jerarquías</h5>
        <p>
            Tenemos un árbol de clases y cada una hereda de la anterior
            dando lugar a un árbol de herencias que añaden funcionalidades
        </p>
        <h5>Orientado a componentes</h5>
        <p>
            Conjunto de entidades, a las que les añadimos
            funcionalidades añadiendoles componentes
        </p>
        <div class="source">
            <a href="http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/">Entidades del juego por componentes</a>
        </div>
      </article>
      <article>
        <h4>Historia - ejemplos</h4>
        <h5>Por jerarquías</h5>
        <img src="../images/gregory_class_hierarchy.png"/>
      </article>
      <article>
        <h4>Historia - ejemplos</h4>
        <h5>Orientado a componentes</h5>
        <img src="../images/Fig-2.gif" style="width: 500px;" />
      </article>
      <article>
        <h4>Usaremos Crafty</h4>
        <ul>
            <li>Orientado a componentes</li>
            <li>Web</li>
            <li>Canvas o DOM</li>
            <li>Detección de colisiones</li>
            <li>Javascript</li>
            <li>Soporte para sprites</li>
            <li>En intenso desarrollo</li>
        </ul>
      </article>
      <article>
        <h4>Componentes - Bibliotecas</h4>
        <ul>
            <li>Posición (2D, 3D)</li>
            <li>Renderizado (Canvas, DOM, Drawing)</li>
            <li>Control (Colisiones, Ratón, Teclado)</li>
            <li>Sonido</li>
            <li>Animación (Sprite, Animation)</li>
            <li>Más (Text, Math, Time, Storage...)</li>
        </ul>
      </article>
      <article>
        <h4>Crafty - Inicio</h4>
        <p>Iniciamos un canvas en el que pintaremos el juego</p>
        <pre>
const WIDTH = 800;
const HEIGHT = 600;

Crafty.init(WIDTH, HEIGHT);
Crafty.canvas.init();
        </pre>
      </article>
      <article>
        <h4>Creamos una escena</h4>
        <pre>
Crafty.scene("loading", function() {
    //Cargamos un actor, sprite.png en la escena "loading"
    Crafty.load(["sprite.png"], function () {
        //cuando todo esté cargado, lanzamos la escena principal
        Crafty.scene("main");
    });

    //Ponemos un fondo negro
    Crafty.background("#000");
    //Colocamos un texto en el centro de la pantalla
    //Con Crafty.e llamamos a una entidad
    Crafty.e("2D, DOM, Text").attr({w: WIDTH/2, h: HEIGHT/2,
                                    x: 100, y: 100})
        .text("Loading").css({"text-align": "center"});
});
        </pre>
      </article>
      <article>
        <h4>Lanzar una escena</h4>
        <p>Tan sencillo como ...</p>
        <pre>
//Ejecutamos esta llamada con el nombre
//Que le hemos puesto a la escena
Crafty.scene("loading");
//Ejecuta la función definida en la anterior
//diapositiva
        </pre>
      </article>
      <article>
        <h4>Inicialización de sprites</h4>
        <pre>
// "Cortamos" el sprite.png donde tenemos
// todos los recursos del juego, en trozos de 16x16 pixeles
Crafty.sprite(16, "sprite.png", {
    grass1: [0, 0],
    grass2: [1, 0],
    grass3: [2, 0],
    grass4: [3, 0],
    flower: [0, 1],
    bush1:  [0, 2],
    bush2:  [1, 2],
    player: [0, 3]
});
//Ahora podremos introducirlos en otros componentes
//con los nombres que les hemos puesto (grass1, player)
        </pre>
      </article>
      <article>
        <h4>Escena principal</h4>
        <pre>
function generateWorld()
{
    //Usamos nuestros sprites anteriores para crear la escena
    //rellenando todos los pixeles de la pantalla
    for (var i = 0; i < 25; i++) {
      //Generamos la hierba,
      //será del tipo (grass1, grass2, grass3, grass4)
      //aleatoriamente
      for (var j = 0; j < 20; j++) {
        grassType = Crafty.randRange(1, 4);
        //Añadimos los componentes a nuestra entidad "pintora"
        Crafty.e("2D, canvas, grass" + grassType)
          .attr({x: i * 16, y: j * 16});
        }
}
        </pre>
      </article>
      <article>
        <h4>Escena principal II</h4>
        <p>Ya podemos llamar a generateWorld
           para pintar la escena en la pantalla
        </p>
        <pre>
Crafty.scene("main", function()
{
    generateWorld();
});
        </pre>
      </article>
      <article>
        <h4>El jugador, actor principal</h4>
        <p>El jugador será una entidad con
           con componentes que lo hagan interactivo
           (Controles, Animación, Colisiones, Posición 2D)
        </p>
        <pre>
var player = Crafty.e("2D, DOM, player, controls, animate,
                      collision")
.attr({x: 160, y: 144, z: 1})
//animate: nombre de animación, posteriormente
// posición del sprite inicial, y final
// para hacer la sensación de que el jugador anda
// Son coordenadas en sprite.png
.animate("walk_left", 6, 3, 8)
.animate("walk_right", 9, 3, 11)
.animate("walk_up", 3, 3, 5)
.animate("walk_down", 0, 3, 2);
        </pre>
      </article>
      <article>
        <h4>Controles</h4>
        <p>
            Creamos un componente Crafty.c,
            que controla el control del jugador
        </p>
        <pre>
Crafty.c('CustomControls', {
__move: {left: false, right: false, up: false, down: false},
_speed: 3,

CustomControls: function(speed) {
  if (speed) this._speed = speed;
  var move = this.__move;
  ...

  return this;
}

        </pre>
      </article>
      <article>
        <h4>Controles II</h4>
        <pre>
  this.bind('enterframe', function() {
    //Movemos al jugador en función de boolelanos que controlan
    //dirección
    if (move.right) this.x += this._speed;
    else if (move.left) this.x -= this._speed;
    else if (move.up) this.y -= this._speed;
    else if (move.down) this.y += this._speed;
  }).bind('keydown', function(e) {
    move.right = move.left = move.down = move.up = false;
    if (e.keyCode === Crafty.keys.RA) move.right = true;
    if (e.keyCode === Crafty.keys.LA) move.left = true;
    ...
  }).bind('keyup', function(e) {
    // If key is released, stop moving
    if (e.keyCode === Crafty.keys.RA) move.right = false;
    if (e.keyCode === Crafty.keys.LA) move.left = false;
    ...
  });
        </pre>
      </article>
      <article>
      	<h3>Licencia</h3>
      	<p>
      	<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
      	<img alt="Licencia de Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
      	<br />Este <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource" rel="dct:type">
      	obra</span> está bajo una <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
      	licencia de Creative Commons Reconocimiento-CompartirIgual 3.0 Unported</a>.
      	</p>
      </article>


      <article>
        <h3>
            Referencias
        </h3>
        <ul>
            <li><a href="http://craftyjs.com/">Crafty website</a></li>
            <li><a href="http://dailyjs.com/2011/02/11/crafty/">Crafty tutorial</a></li>
        </ul>
        <br />
        <p>Presentación hecha con <a href="http://code.google.com/p/html5slides/">plantilla HTML5 de la gente de Google</a></p>
      </article>

      <article>
        <h3>
          Muchas gracias<br />¿Alguna pregunta?
        </h3>
		<br />
		<br />
        <ul>
          <li><a href="http://twitter.com/javaguirre">Javier Aguirre</a></li>
          <li>Israel Gutiérrez</li>
        </ul>
      </article>

    </section>

  </body>
</html>
